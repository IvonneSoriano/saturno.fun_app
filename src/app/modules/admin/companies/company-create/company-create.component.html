<form autocomplete="off" style="color: brown;" ngNativeValidate #formDirective="ngForm" [formGroup]="forma"
    (ngSubmit)="createCompany(formDirective)">

    <mat-form-field color="warn" logincss class="w-100">
        <mat-label>Nombre del Bar / Restorant</mat-label>
        <mat-error>Esta Empresa ya se encuentra registrada!</mat-error>
        <input matInput placeholder="Nombre de la empresa" formControlName="txCompanyName" name="txCompanyName" type="text" required
            (keyup)="checkCompanyExists()">
    </mat-form-field>

    <mat-form-field color="warn" logincss class="w-100">
        <mat-label>Slogan (Opcional)</mat-label>
        <input matInput placeholder="Slogan de la empresa" formControlName="txCompanySlogan" name="txCompanySlogan"
            type="text">
    </mat-form-field>

    <mat-form-field color="warn" logincss class="w-100">
        <mat-label>Nombre p√∫blico</mat-label>
        <input matInput placeholder="Nombre de la empresa" formControlName="txCompanyString" name="txCompanyString"
            type="text" required>
    </mat-form-field>

    <mat-form-field color="warn" logincss class="w-100">
        <mat-label>Ingrese localidad</mat-label>
        <input type="text" matInput [formControl]="localidadesControl" [matAutocomplete]="auto"
            (click)="cleanInput()" />
        <span class=" input-icon" (click)="cleanInput()"><i class="mdi mdi-close"></i></span>
    </mat-form-field>

    <!-- $event.option.value va a tomar el valor definido en [value], debe ir siempre el objeto seleccionado en este caso "option" -->
    <mat-autocomplete (optionSelected)="setLocalidad($event.option.value)" iniciocss #auto="matAutocomplete"
        [displayWith]="getInputLocalidadNombre.bind(this)">
        <mat-option [value]="option" *ngFor="let option of localidades">
            {{ option.properties.nombre | capitalizarPipe }},
            {{ option.properties.departamento.nombre }},
            {{ option.properties.provincia.nombre }}
        </mat-option>
    </mat-autocomplete>


    <mat-form-field color="warn" logincss class="w-100">
        <mat-label>Calle</mat-label>
        <input matInput placeholder="Calle" formControlName="txAddressStreet" name="txAddressStreet" type="text" required>
    </mat-form-field>

    <mat-form-field color="warn" logincss class="w-100">
        <mat-label>Altura</mat-label>
        <input matInput placeholder="1234" formControlName="txAddressNumber" name="txAddressNumber" type="text" required>
    </mat-form-field>


    <!---------------------------------------------------------------------->
    <!-- CONTROLES LAT LNG Y MAPA -->
    <!---------------------------------------------------------------------->


    <!---------------------------------------------------------------------->
    <!-- LAT -->
    <!---------------------------------------------------------------------->
    <input type="text" placeholder="lat" class="coords-input" formControlName="txCompanyLat" />

    <!---------------------------------------------------------------------->
    <!-- LNG -->
    <!---------------------------------------------------------------------->
    <input type="text" placeholder="lng" class="coords-input" formControlName="txCompanyLng" />


    <!---------------------------------------------------------------------->
    <!-- MAPBOX -->
    <!---------------------------------------------------------------------->
    <app-map [(center)]="centerMap" (newMarker)="setCoords($event)"></app-map>

    <div *ngIf="!companyEdit" class="row text-center">
        <div class="col">
            <button *ngIf="!companyEdit" class="btn btn-success btn-block text-uppercase" type="submit">
                Crear Comercio
            </button>
        </div>
    </div>
    <div *ngIf="companyEdit" class="row">
        <div class="col w-100">
            <button class="btn btn-danger btn-block text-uppercase" type="submit">
                Guardar
            </button>
        </div>
        <div class="col">
            <button class="btn btn-warning btn-block text-uppercase" (click)="resetForm(formDirective)">
                Limpiar
            </button>
        </div>
    </div>


</form>